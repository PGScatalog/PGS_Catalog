{% extends 'catalog/base.html' %}
{% load static %}

{% block title %}The Polygenic Score Catalog{% endblock %}

{% block content %}
<div class="columns">
  <section>

    <!-- Release -->
    <div class="release_label">
      <div>
        <span data-toggle="tooltip" data-placement="bottom" data-html="true" title="New Polygenic Scores: <b>{{ release.score_count }}</b><br />New Publications: <b>{{ release.publication_count }}</b>">
          <i class="far fa-calendar-check pgs_color_1"></i> <a href="/latest_release">Latest release: <b>{{ release.date }}</b></a>
        </span>
      {% if is_pgs_curation_site %}
        <i class="fas fa-arrow-right" class="pl-3 pr-3"></i>
        <a href="/releases"  data-toggle="tooltip" data-placement="bottom" title="Releases details"><i class="fas fa-chart-line pgs_color_1"></i></a>
      {% endif %}
      </div>
    </div>

    <!-- Title -->
    <div class="pgs_centered mb-4">
      <h2 class="page_title"><b>The Polygenic Score (PGS) Catalog</b></h2>
      <h5 class="mt-0">An open database of polygenic scores and the relevant metadata required for accurate application and evaluation.</h5>
    </div>

    <!-- Large search bar -->
    <div class="search_box_home_container mb-5">
      <div class="search_box_home">
        <form class="input-group search_form" id="search_form" action="/search" method="get">
          <input class="form-control" id="q" name="q" type="text" placeholder="Search the PGS Catalog" spellcheck="false">
          <div class="input-group-append">
            <button type="button" class="btn btn-pgs pgs_no_icon_link" id="search_btn" value="Submit">
              <span class="fas fa-search"></span>
            </button>
          </div>
        </form>
        <div class="search_examples mt-1">
          <span class="pr-2">Examples:</span>{{ pgs_search_examples|safe }}
        </div>
      </div>
    </div>


    <!-- PGS announcement -->
    {% if announcement %}
      <div class="pgs_centered mb-4">
        <div class="pgs_banner">{{ announcement|safe }}</div>
      </div>
    {% endif %}

    <div class="row no-gutters pgs_section mt-5 mb-3">
      <div class="col">
        <div class="pgs_section_title">Catalog Data Contents</div>
      </div>
    </div>


    <div class="row no-gutters pgs_browse">
      <div class="col-xs-6 col-md-4">
        <div class="pgs_browse_item" id="pgs_browse_facet_1">
          <div class="pgs_data_numbers">
            <div>
              <span><span class="pgs_facet_icon pgs_facet_1_icon"></span><span class="pgs_data_type">Scores</span></span>
              <span>{{ num_pgs }}</span>
            </div>
            {% if num_pgs_not_released %}
              <div class="num_not_released">
                <i class="fas fa-angle-double-right pgs_color_facet_1"></i> Includes <span>{{ num_pgs_not_released }}</span> not yet released
              </div>
            {% endif %}
          </div>
          <a class="browse_link pgs_no_icon_link" href="/browse/scores/"><i class="fa-solid fa-table-list pr-2"></i>Browse Scores</a>
        </div>
      </div>
      <div class="col-xs-6 col-md-4">
        <div class="pgs_browse_item" id="pgs_browse_facet_2">
          <div class="pgs_data_numbers">
            <div>
              <span><span class="pgs_facet_icon pgs_facet_2_icon icon icon-species"></span><span class="pgs_data_type">Traits</span></span>
              <span>{{ num_traits }}</span>
            </div>
            {% if num_traits_not_released %}
              <div class="num_not_released">
                <i class="fas fa-angle-double-right pgs_color_facet_2"></i> Includes <span>{{ num_traits_not_released }}</span> not yet released
              </div>
            {% endif %}
          </div>
          <a class="browse_link pgs_no_icon_link" href="/browse/traits/"><i class="fa-solid fa-table-list pr-2"></i>Browse Traits</a>
        </div>
      </div>
      <div class="col-xs-6 col-md-4">
        <div class="pgs_browse_item" id="pgs_browse_facet_3">
          <div class="pgs_data_numbers">
            <div>
              <span><span class="pgs_facet_icon pgs_facet_3_icon icon icon-common"></span><span class="pgs_data_type">Publications</span></span>
              <span>{{ num_pubs }}</span>
            </div>
            {% if num_pubs_not_released %}
              <div class="num_not_released">
                <i class="fas fa-angle-double-right pgs_color_facet_3"></i> Includes <span>{{ num_pubs_not_released }}</span> not yet released
              </div>
            {% endif %}
          </div>
          <a class="browse_link pgs_no_icon_link" href="/browse/studies"><i class="fa-solid fa-table-list pr-2"></i>Browse Publications</a>
        </div>
      </div>
    </div>


    <div class="row no-gutters pgs_section mt-5 mb-3">
      <div class="col">
        <div class="pgs_section_title">Data Access</div>
      </div>
    </div>


    <div class="row no-gutters pgs_browse">
      <div class="col-xs-6 col-md-4">
        <div class="pgs_browse_item">
          <div class="pgs_data_access">
            <div>Downloads</div>
            <p>
              Metadata & Scoring Files (variant, effect allele/weight)
            </p>
          </div>
          <a class="browse_link btn btn-pgs pgs_no_icon_link" href="/downloads/"><i class="fas fa-download" style="color:#FFF"></i> Downloads (FTP)</a>
        </div>
      </div>
      <div class="col-xs-6 col-md-4">
        <div class="pgs_browse_item">
          <div class="pgs_data_access">
            <div>REST API</div>
            <p>
              Programmatic access to the PGS Catalog Metadata
            </p>
          </div>
          <a class="browse_link btn btn-pgs pgs_no_icon_link" href="/rest/"><i class="fas fa-code" style="color:#FFF"></i> REST API</a>
        </div>
      </div>

      <div class="col-xs-6 col-md-4">
        <div class="pgs_browse_item">
          <div class="pgs_data_access">
            <div>Data Submission</div>
            <p>
              Submit Scores & Metadata to the PGS Catalog
            </p>
          </div>
          <a class="browse_link btn btn-pgs pgs_no_icon_link" href="/submit/"><i class="fas fa-file-import pr-2"></i>Submit a PGS</a>
        </div>
      </div>
    </div>


    <div class="row pgs_desc pt-3" style="display:none">

      <!-- Download -->
      <div class="col-xs-10 col-md-4">
        <div>Downloads</div>
        <p>
          Bulk <b>downloads</b> of PGS Catalog Metadata and Scoring Files (variants, effect alleles/weights) via FTP.
        </p>
        <div class="mb-2">
          <a class="btn btn-pgs pgs_no_icon_link" style="width:165px" href="/downloads/">
            <span class="fas fa-download" style="color:#FFF"></span> Data Downloads
          </a>
        </div>
      </div>


      <!-- REST API -->
      <div class="col-xs-10 col-md-4">
        <div>REST API</div>
        <p>
          Programmatic access to the PGS Catalog Metadata.
        </p>
        <div>
          <a class="btn btn-pgs pgs_no_icon_link" style="width:165px" href="/rest/">
            <span class="fas fa-code" style="color:#FFF"></span> REST API
          </a>
        </div>
      </div>

      <!-- Submit scores -->
      <div class="col-xs-10 col-md-4">
        <div style="margin-bottom: 0.5rem">Data Submission</div>
        <p style="text-align:center">Submit Scores + Metadata to the PGS Catalog.</p>
        <a class="btn btn-pgs pgs_no_icon_link" style="width:165px" href="/submit/">
          <span class="fas fa-file-import pr-2"></span>Submit a PGS
        </a>
      </div>
    </div>



    <div class="row pgs_desc">
      <!-- What is a PGS -->
      <div class="col-xs-10 col-md-4">
        <div>What is a <span>PGS</span>?</div>
        <p style="text-align:justify">
            <b>A polygenic score (PGS)</b> aggregates the effects of many genetic variants into a single number which predicts genetic predisposition for a phenotype.
            <b>PGS</b> are typically composed of hundreds-to-millions of genetic variants (usually <span title="SNPs" data-content="Single Nucleotide Polymorphisms" class="pgs_helpover">SNPs</span>) which are combined using a weighted sum of allele dosages multiplied by their corresponding effect sizes, as estimated from a relevant genome-wide association study (<span title="GWAS" data-content="Genome-wide association studies" class="pgs_helpover">GWAS</span>).
        </p>
        <p class="mb-0" style="text-align:justify">
            <b>PGS</b> nomenclature is heterogeneous: they can also be referred to as <b>genetic scores</b> or <b>genomic scores</b>, and as <b>polygenic risk scores (PRS)</b> or <b>genomic risk scores (GRS)</b> if they predict a discrete phenotype, such as a disease.
        </p>
      </div>
      <!-- About -->
      <div class="col-xs-10 col-md-4">
        <div>About the <span>PGS Catalog</span></div>
        <p style="text-align:justify">
          The <span title="PGS Catalog" data-content="Polygenic Score (PGS) Catalog" class="pgs_helpover"><b>PGS Catalog</b></span> is an open database of published <b>polygenic scores (PGS)</b>.
            Each <b>PGS</b> in the <b>Catalog</b> is consistently annotated with relevant metadata; including scoring files (variants, effect alleles/weights), annotations of how the PGS was developed and applied, and evaluations of their predictive performance.
        </p>
        <p class="mb-0" style="text-align:justify">
          More about the PGS Catalog project, descriptions of the data, and publication eligibility criteria can be found in our <a href="/about"><b>documentation</b></a> and recent <a href="{{catalog_publication_url}}"><b>paper</b></a>.
        </p>
      </div>


      <!-- Documentation -->
      <div class="col-xs-10 col-md-4">
        <div><span>PGS Catalog</span> Documentation</div>
        <p style="text-align:justify">
          This website provides diverse documentation about the PGS Catalog, such as the description of the <a href="/docs/ancestry/"><i class="fa-solid fa-book pgs_color_1"></i> Ancestry Data</a> and the detailed description of the <a href="/docs/"><i class="fa-solid fa-book pgs_color_1"></i> Metadata</a>.
        </p>
        <p style="text-align:justify">
          A frequently asked questions page is also available:
        </p>
        <div>
          <a class="btn btn-pgs pgs_no_icon_link" style="width:165px" href="/docs/faq/">
            <span class="fas fa-circle-question pgs_color_white pr-2"></span>FAQ
          </a>
        </div>
      </div>
    </div>


    <div class="row no-gutters pgs_bottom_section_1">
      <div class="col">
        <h5 class="mb-3">Feedback & Contact</h5>
        <div>
          To <b>submit a PGS to the catalog</b>, <b>provide feedback</b>, or <b>ask questions</b>: contact the PGS Catalog team at <a href="mailto:{{ pgs_contact }}"><i class="fas fa-envelope pgs_color_1"></i> {{ pgs_contact }}</a>!<br/>
          <b>Recommend missing PGS publications and scores</b> for inclusion in the Catalog using this <a href="/report_study"><i class="fas fa-clipboard-list pgs_color_1"></i> <b>form</b></a>.
        </div>
      </div>
    </div>

    <div class="row no-gutters pgs_bottom_section_2">
      <div class="col">
        <h5 class="mb-3">Development of the <b>PGS Catalog</b> is supported by:</h5>
      </div>
    </div>
    <div class="row justify-content-center mb-5">
      <div class="col pgs_centered">
        <a class="pgs_no_icon_link" href="{{ uoc_url }}"><img class="img-fluid pgs_big_icons" src="{% static 'catalog/imgs/UofCambridge.png' %}" alt="University of Cambridge"></a>
      </div>
      <div class="col pgs_centered">
        <a class="pgs_no_icon_link" href="{{ ebi_url }}"><img class="img-fluid pgs_big_icons" src="{% static 'catalog/imgs/EMBL_EBI.png' %}" alt="EMBL-EBI"></a>
      </div>
      <div class="col pgs_centered">
        <a class="pgs_no_icon_link" href="{{ hdr_uk_cam_url }}"><img class="img-fluid pgs_big_icons" src="{% static 'catalog/imgs/HDR-UK.png' %}" alt="HDR-UK (Cambridge)"></a>
      </div>
      <div class="col pgs_centered">
        <a class="pgs_no_icon_link" href="{{ baker_url }}"><img class="img-fluid pgs_big_icons" src="{% static 'catalog/imgs/Baker_Logo.png' %}" alt="Baker Heart and Diabetes Institute"></a>
      </div>
      <div class="col pgs_centered">
        <a class="pgs_no_icon_link" href="{{ nhgri_url }}"><img class="img-fluid pgs_big_icons" src="{% static 'catalog/imgs/NHGRI_Logo.png' %}" alt="National Human Genome Research Institute"></a>
      </div>
    </div>
  </section>
</div>
{% endblock %}
